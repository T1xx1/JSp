---
import type { Page } from './types';

type Props = {
	pages: Page[];
}

const { pages } = Astro.props;
---

{
	Math.round(
		(pages.filter((page) => {
			if (
				page.frontmatter.support.tc39?.value &&
				page.frontmatter.support.tc39?.stage === 'Inactive'
			) {
				return false;
			}

			return page.frontmatter.support.jsp?.value;
		}).length /
			pages.filter((page) => {
				if (
					page.frontmatter.support.tc39?.value &&
					page.frontmatter.support.tc39?.stage === 'Inactive'
				) {
					return false;
				}

				return true;
			}).length) *
			100,
	)
}%
